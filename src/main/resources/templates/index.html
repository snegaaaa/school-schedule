<!doctype html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–®–∫–æ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</title>
  <link rel="stylesheet" th:href="@{/css/app.css}">
  <style>
    .action-grid{
      display:grid;
      grid-template-columns:repeat(4, 1fr);
      gap:12px;
    }
    @media (max-width: 980px){ .action-grid{ grid-template-columns:repeat(2, 1fr); } }
    @media (max-width: 520px){ .action-grid{ grid-template-columns:1fr; } }

    .action{
      display:flex;
      gap:12px;
      align-items:flex-start;
      padding:14px;
      border:1px solid var(--border);
      border-radius:14px;
      background:#fff;
      box-shadow:var(--shadow);
      text-decoration:none;
      transition: transform .08s ease, border-color .08s ease, background .08s ease;
      min-height:86px;
    }
    .action:hover{
      border-color: rgba(13,110,253,.35);
      background: rgba(13,110,253,.03);
      transform: translateY(-1px);
    }
    .action .ic{
      width:38px; height:38px;
      display:flex; align-items:center; justify-content:center;
      border-radius:12px;
      border:1px solid var(--border);
      background: rgba(13,110,253,.06);
      flex: 0 0 auto;
      font-size:18px;
    }
    .action .t{ font-weight:900; margin:0; line-height:1.15rem; }
    .action .d{ margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.25rem; }

    /* Health */
    .health-list{ display:flex; flex-direction:column; gap:10px; margin-top:12px; }
    .health-item{
      display:flex; gap:12px; align-items:flex-start; justify-content:space-between;
      padding:12px;
      border:1px solid var(--border);
      border-radius:14px;
      background:#fff;
    }
    .h-left{ display:flex; gap:12px; align-items:flex-start; }
    .dot{
      width:12px; height:12px; border-radius:999px; margin-top:4px;
      border:1px solid rgba(0,0,0,.12);
      flex:0 0 auto;
    }
    .dot.ok{ background: rgba(25,135,84,.9); }
    .dot.warn{ background: rgba(255,193,7,.95); }
    .dot.bad{ background: rgba(220,53,69,.9); }

    .h-title{ font-weight:900; }
    .h-value{ color:var(--muted); font-weight:900; margin-left:8px; }
    .h-msg{ color:var(--muted); font-size:13px; margin-top:4px; line-height:1.25rem; }

    .h-act{ flex:0 0 auto; }
  </style>
</head>
<body>
<div class="container">

  <div class="topbar">
    <div class="brand">
      <a class="brand-title" th:href="@{/}">–®–∫–æ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</a>
      <p class="brand-sub">–ì–ª–∞–≤–Ω–∞—è</p>
    </div>

    <div class="nav">
      <a th:href="@{/schedule}">üìÖ –ü–æ –¥–Ω—è–º</a>
      <a th:href="@{/schedule/week}">üóìÔ∏è –ù–µ–¥–µ–ª—è</a>
      <a th:href="@{/stats}">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
      <a th:href="@{/about}">‚ÑπÔ∏è –û–± –∞–≤—Ç–æ—Ä–µ</a>

      <span sec:authorize="hasRole('ADMIN')" class="inline">
        <a th:href="@{/classes}">üè´ –ö–ª–∞—Å—Å—ã</a>
        <a th:href="@{/setup}">üß© –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</a>
        <a th:href="@{/admin/users}">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
      </span>
    </div>

    <div class="userbox">
      <div class="badge">üë§ <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</span> <b sec:authentication="name">user</b></div>
      <form th:action="@{/logout}" method="post" style="margin:0;">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
        <button class="btn" type="submit">–í—ã–π—Ç–∏</button>
      </form>
    </div>
  </div>

  <div class="pagehead pagehead-center">
    <h1>–®–∫–æ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h1>
    <p>–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –∏ –¥–∞–Ω–Ω—ã–º ‚Äî –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.</p>
  </div>

  <div class="grid">

    <!-- ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN -->
    <div class="card" sec:authorize="hasRole('ADMIN')">
      <div class="h2" style="margin-bottom:6px;">–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã</div>

      <div class="muted" th:if="${readyAll}">
        –í—Å—ë –≥–æ—Ç–æ–≤–æ: –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–ø–æ–ª–Ω—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.
      </div>
      <div class="muted" th:if="${!readyAll}">
        –ï—Å—Ç—å –ø—É–Ω–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ª—É—á—à–µ –∑–∞–ø–æ–ª–Ω–∏—Ç—å, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–ª–æ ‚Äú–∫–∞–∫ –ø–æ —É—á–µ–±–Ω–∏–∫—É‚Äù.
      </div>

      <div class="health-list">
        <div class="health-item" th:each="it : ${health}">
          <div class="h-left">
            <div class="dot" th:classappend="${it.status}"></div>
            <div>
              <div class="h-title">
                <span th:text="${it.title}">–ü—É–Ω–∫—Ç</span>
                <span class="h-value" th:text="${it.value}">0</span>
              </div>
              <div class="h-msg" th:text="${it.message}">–°–æ–æ–±—â–µ–Ω–∏–µ</div>
            </div>
          </div>

          <div class="h-act">
            <a class="btn btn-link"
               th:if="${it.actionUrl != null}"
               th:href="${it.actionUrl}"
               th:text="${it.actionText}">–ü–µ—Ä–µ–π—Ç–∏</a>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="h2" style="margin-bottom:6px;">–û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã</div>
      <div class="muted">–û—Ç–∫—Ä—ã–≤–∞–π –Ω—É–∂–Ω—ã–π —Ä–µ–∂–∏–º –≤ –æ–¥–∏–Ω –∫–ª–∏–∫.</div>

      <div style="margin-top:12px;">
        <div class="action-grid">
          <a class="action" th:href="@{/schedule}">
            <div class="ic">üìÖ</div>
            <div>
              <div class="t">–ü–æ –¥–Ω—è–º</div>
              <div class="d">–í—ã–±–æ—Ä –∫–ª–∞—Å—Å–∞ –∏ –¥–Ω—è –Ω–µ–¥–µ–ª–∏.</div>
            </div>
          </a>

          <a class="action" th:href="@{/schedule/week}">
            <div class="ic">üóìÔ∏è</div>
            <div>
              <div class="t">–ù–µ–¥–µ–ª—è</div>
              <div class="d">–û–±–∑–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –Ω–∞ –≤—Å—é –Ω–µ–¥–µ–ª—é.</div>
            </div>
          </a>

          <a class="action" th:href="@{/stats}">
            <div class="ic">üìä</div>
            <div>
              <div class="t">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
              <div class="d">–°–≤–æ–¥–∫–∞ –∏ –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏.</div>
            </div>
          </a>

          <a class="action" th:href="@{/about}">
            <div class="ic">‚ÑπÔ∏è</div>
            <div>
              <div class="t">–û–± –∞–≤—Ç–æ—Ä–µ</div>
              <div class="d">–ö–æ–Ω—Ç–∞–∫—Ç—ã –∞–≤—Ç–æ—Ä–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ.</div>
            </div>
          </a>
        </div>
      </div>
    </div>

    <div class="card" sec:authorize="hasRole('ADMIN')">
      <div class="h2" style="margin-bottom:6px;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
      <div class="muted">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞–º–∏ –∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞–º–∏.</div>

      <div style="margin-top:12px;">
        <div class="action-grid" style="grid-template-columns:repeat(3, 1fr);">
          <a class="action" th:href="@{/classes}">
            <div class="ic">üè´</div>
            <div>
              <div class="t">–ö–ª–∞—Å—Å—ã</div>
              <div class="d">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤.</div>
            </div>
          </a>

          <a class="action" th:href="@{/setup}">
            <div class="ic">üß©</div>
            <div>
              <div class="t">–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏</div>
              <div class="d">–£—á–∏—Ç–µ–ª—è, –∫–∞–±–∏–Ω–µ—Ç—ã, –ø—Ä–µ–¥–º–µ—Ç—ã, —Å–ª–æ—Ç—ã –≤—Ä–µ–º–µ–Ω–∏.</div>
            </div>
          </a>

          <a class="action" th:href="@{/admin/users}">
            <div class="ic">üë•</div>
            <div>
              <div class="t">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
              <div class="d">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á—ë—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏.</div>
            </div>
          </a>
        </div>
      </div>
    </div>

  </div>

</div>
</body>
</html>
